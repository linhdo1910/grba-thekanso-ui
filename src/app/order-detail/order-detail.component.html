<div class="container mt-4" *ngIf="order">
  <!-- Header -->
  <div class="text-right">
    <button class="btn btn-link" (click)="closeDetail()">Back to List</button>
  </div>
  
  <!-- Order Details Section -->
  <div class="row mb-3">
    <div class="col-md-8">
      <h2>Order Details · {{ order.date }} · {{ order.products.length }} Products</h2>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Billing Address</h5>
          <p><strong>{{ order.billingAddress.name }}</strong></p>
          <p>{{ order.billingAddress.address }}</p>
          <p>{{ order.billingAddress.email }}</p>
          <p>{{ order.billingAddress.phone }}</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Order Info</h5>
          <p><strong>Order ID:</strong> #{{ order.orderId }}</p>
          <p><strong>Payment Method:</strong> {{ order.paymentMethod }}</p>
          <p><strong>Subtotal:</strong> {{ order.subtotal | currency:'VND' }}</p>
          <p><strong>Discount:</strong> {{ order.discount }}%</p>
          <p><strong>Shipping:</strong> {{ order.shipping }}</p>
          <p><strong>Total:</strong> {{ order.total | currency:'VND' }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Products Table -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Products</h5>
      <table class="table">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of order.products">
            <td>{{ product.name }}</td>
            <td>{{ product.price | currency:'VND' }}</td>
            <td>x{{ product.quantity }}</td>
            <td>{{ product.subtotal | currency:'VND' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="card-footer text-center">
    <button class="btn btn-outline-secondary" (click)="cancelOrder()" [disabled]="order?.status === 4">
      Cancel
    </button>
    <button class="btn btn-primary" (click)="writeReview()" [disabled]="order?.status !== 4">
      Write Review
    </button>
  </div>
</div>
